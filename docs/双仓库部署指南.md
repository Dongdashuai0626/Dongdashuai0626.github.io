# 单用户双仓库部署指南

本指南详细说明如何使用 **单账号 + 子路径 /blog** 的方式实现学术主页与博客的分离部署。

## 📋 项目概述

### 仓库架构
- **主仓库**: `dongjiacheng06.github.io` - 学术主页（根目录）
- **博客仓库**: `dongjiacheng06.github.io` - Jekyll Chirpy 博客（/blog 子路径）

### 访问地址
- **学术主页**: https://dongjiacheng06.github.io/
- **技术博客**: https://dongjiacheng06.github.io/blog/

## 🚀 部署步骤

### 1. 仓库配置

#### 主仓库设置
- 仓库名：`dongjiacheng06.github.io`
- 分支：`main`
- 包含学术主页的静态文件

#### 博客配置
博客使用同一仓库的不同目录，通过 Jekyll 配置实现子路径部署。

### 2. Jekyll 配置 (_config.yml)

关键配置项：

```yaml
# 站点基本信息
title: 董嘉铖的博客
tagline: 3D Vision & AI Research Blog
description: >-
  董嘉铖的个人博客，专注于3D视觉、3D高斯散射、深度学习等领域的技术分享与研究心得。

# 部署配置（关键）
url: "https://dongjiacheng06.github.io"
baseurl: "/blog"

# 作者信息
github:
  username: dongjiacheng06

social:
  name: Jiacheng Dong
  email: Dong48@illinois.edu
  links:
    - https://github.com/dongjiacheng06

# 头像配置
avatar: "/assets/images/personal_photo.jpg"

# 功能配置
toc: true
pwa:
  enabled: true
paginate: 10
```

### 3. GitHub Pages 设置

#### 启用 GitHub Pages
1. 进入仓库 Settings
2. 找到 Pages 选项
3. Source 选择：**GitHub Actions**
4. 保存设置

#### GitHub Actions 工作流
项目使用 `.github/workflows/pages-deploy.yml` 自动构建部署：

```yaml
name: "Build and Deploy"
on:
  push:
    branches:
      - main
      - master
  workflow_dispatch:

permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: "pages"
  cancel-in-progress: true

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Setup Pages
        id: pages
        uses: actions/configure-pages@v4

      - name: Setup Ruby
        uses: ruby/setup-ruby@v1
        with:
          ruby-version: 3.3
          bundler-cache: true

      - name: Build site
        run: bundle exec jekyll b -d "_site${{ steps.pages.outputs.base_path }}"
        env:
          JEKYLL_ENV: "production"

      - name: Test site
        run: |
          bundle exec htmlproofer _site \
            \-\-disable-external=true \
            \-\-ignore-urls "/^http:\/\/127.0.0.1/,/^http:\/\/0.0.0.0/,/^http:\/\/localhost/"

      - name: Upload site artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: "_site${{ steps.pages.outputs.base_path }}"

  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
```

### 4. 依赖管理 (Gemfile)

```ruby
source "https://rubygems.org"

gem "jekyll-theme-chirpy", "~> 7.0", ">= 7.0.1"
gem "html-proofer", "~> 5.0", group: :test

platforms :mingw, :x64_mingw, :mswin, :jruby do
  gem "tzinfo", ">= 1", "< 3"
  gem "tzinfo-data"
end

gem "wdm", "~> 0.1.1", :platforms => [:mingw, :x64_mingw, :mswin]
gem "http_parser.rb", "~> 0.6.0", :platforms => [:jruby]
```

## 🔗 导航链接集成

### 学术主页链接到博客

在学术主页的导航中已添加博客链接：

```html
<!-- 导航栏 -->
<a href="/blog" aria-label="Visit blog page">Blog</a>

<!-- 社交链接 -->
<a href="/blog" target="_blank"><i class="fas fa-blog"></i>博客</a>
```

### 博客链接回主页

在博客的 `_tabs/about.md` 中：

```markdown
更多信息请访问我的[学术主页](https://dongjiacheng06.github.io)。
```

## 📝 内容管理

### 目录结构
```
dongjiacheng06.github.io/
├── _config.yml          # Jekyll 配置
├── _posts/              # 博客文章
│   ├── 2025-01-20-welcome-to-my-blog.md
│   └── 2025-01-21-3d-gaussian-splatting-intro.md
├── _tabs/               # 页面标签
│   ├── about.md
│   ├── archives.md
│   ├── categories.md
│   └── tags.md
├── assets/              # 静态资源
│   ├── css/
│   ├── images/
│   └── js/
├── .github/workflows/   # GitHub Actions
├── Gemfile              # Ruby 依赖
├── index.html           # 学术主页
├── blog.html            # 博客相关页面
├── hobbies.html         # 兴趣爱好页面
├── photography.html     # 摄影作品页面
└── docs/                # 文档目录
```

### 创建新博客文章

1. 在 `_posts/` 目录创建文件：`YYYY-MM-DD-标题.md`
2. 添加 Front Matter：

```yaml
---
title: 文章标题
date: YYYY-MM-DD HH:MM:SS +0800
categories: [分类1, 分类2]
tags: [标签1, 标签2]
math: true    # 启用数学公式
mermaid: true # 启用图表
image:
  path: /assets/images/预览图.jpg
  alt: 图片描述
---
```

3. 编写 Markdown 内容

## 🛠 本地开发

### 环境要求
- Ruby 3.x
- Jekyll 4.x
- Bundler

### 安装步骤

```bash
# 克隆仓库
git clone https://github.com/dongjiacheng06/dongjiacheng06.github.io.git
cd dongjiacheng06.github.io

# 安装依赖
bundle install

# 本地运行博客
bundle exec jekyll serve

# 访问地址
http://localhost:4000/blog/
```

### 常用命令

```bash
# 构建站点
bundle exec jekyll build

# 本地预览（带草稿）
bundle exec jekyll serve --drafts

# 清理缓存
bundle exec jekyll clean

# 检查链接
bundle exec htmlproofer _site --disable-external
```

## 🎨 主题特性

基于 [Jekyll Chirpy](https://github.com/cotes2020/jekyll-theme-chirpy) 主题：

- ✅ 响应式设计
- ✅ 深色/浅色模式切换
- ✅ 全文搜索功能
- ✅ 分类和标签系统
- ✅ 数学公式支持 (LaTeX)
- ✅ 图表支持 (Mermaid)
- ✅ 代码语法高亮
- ✅ 社交媒体集成
- ✅ SEO 优化
- ✅ PWA 支持
- ✅ 评论系统（可选）

## 🔧 自定义配置

### 评论系统（可选）

在 `_config.yml` 中配置评论：

```yaml
comments:
  active: disqus  # 或 utterances、giscus
  disqus:
    shortname: your-disqus-shortname
```

### Google Analytics（可选）

```yaml
google_analytics:
  id: G-XXXXXXXXXX
```

### 搜索引擎优化

```yaml
google_site_verification: "your-verification-code"
```

## 🚨 常见问题

### 1. 博客页面 404 错误
- 检查 `baseurl: "/blog"` 配置
- 确认 GitHub Pages 已启用
- 检查构建日志是否有错误

### 2. 样式文件加载失败
- 确认 `url` 和 `baseurl` 配置正确
- 检查 CSS 文件路径

### 3. 图片显示异常
- 图片路径应使用 `/assets/images/` 开头
- 确认图片文件已提交到仓库

### 4. 构建失败
- 检查 Gemfile 依赖版本
- 查看 GitHub Actions 构建日志
- 确认 Jekyll 语法正确

## 📞 技术支持

如遇到问题，可以：

1. 查看 [Jekyll 官方文档](https://jekyllrb.com/)
2. 参考 [Chirpy 主题文档](https://chirpy.cotes.page/)
3. 查看项目 GitHub Issues
4. 联系维护者：Dong48@illinois.edu

## 🎯 部署检查清单

部署完成后，请检查：

- [ ] 学术主页正常访问：https://dongjiacheng06.github.io/
- [ ] 博客正常访问：https://dongjiacheng06.github.io/blog/
- [ ] 导航链接正常工作
- [ ] 样式和图片正常显示
- [ ] 搜索功能正常
- [ ] 移动端适配良好
- [ ] SEO 设置完整

---

**部署完成！** 🎉

现在你拥有了一个完整的学术主页 + 技术博客系统，可以开始分享你的研究成果和技术心得了。
